"use strict";$(document).on("ready",function(){var e=$(".providers-slider li").length,s=e,t=$(window).width();function i(e){$(e).each(function(e){var o=$(this).next(".provider-count").find(".current-slide"),r=$(this).next(".provider-count").find(".slide-count");$(this).on("init reInit afterChange",function(e,s,t,i){var a=(t||0)+1;o.text(a),r.text(s.slideCount)})})}function f(){$(".providers-table-slider").slick({dots:!1,slidesToShow:1,slidesToScroll:1,customPaging:i(".providers-table-slider")})}function p(){$(".providers-table-slider.slick-initialized").slick("unslick")}function h(){$('a[data-target="#legalInfo"]').on("click",function(e){e.preventDefault(),e.stopPropagation();var s=$(this).next(".terms-content").text();$("#legalInfo .modal-body .text-left").text(s),$("#legalInfo").modal("show")})}function v(e,t,i){i=i||"",$.each(e,function(e,s){$(s).attr("href","#"+t[e]+i)})}function u(i,a,o,r){r=r||"";var n=i.find("div#"+a+r);n.find("table");$.each(o,function(e,s){if(1===i.find("div#"+s+r).find("table").length){var t=$("a[href=#"+s+r+"]");t.parent().removeClass("active"),t.addClass("disabled"),a!=o[0]&&(a=o[0],$("a[href=#"+a+r+"]").parent().addClass("active"))}n=i.find("div#"+a+r)}),n.addClass("in active")}5<e&&(s=5),$(".providers-slider").slick({dots:!1,accessibility:!0,adaptiveHeight:!0,centerMode:!0,centerPadding:"0px",arrows:!0,slidesToShow:s,mobileFirst:!0,slidesToScroll:1,customPaging:i(".providers-slider"),responsive:[{breakpoint:1020,settings:{slidesToShow:s,slidesToScroll:1}},{breakpoint:991,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:318,settings:{slidesToShow:1,slidesToScroll:1}}]}),$(window).load(function(){if(t<768&&location.hash){var e=location.hash.slice(1);$(".terms-table-slider").slick({dots:!1,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0});var s=$("."+e).closest(".slick-slide").attr("data-slick-index");$(".terms-table-slider").slick("slickGoTo",parseInt(s))}}),f(),$(document).on("click",".providers-table .slide-cell",function(){var e=$(this).parent().next(".hidden-row ");e.hasClass("open")?($(this).removeClass("open"),e.removeClass("open")):($(this).addClass("open"),e.addClass("open")),e.find("td .hidden-content").slideToggle()}),$(".tab-offers a").click(function(e){e.preventDefault(),$(this).tab("show"),$(".providers-table-slider").slick("refresh")}),$(".map-section a").on("click",function(e){var s=$(".tab-offers a[href="+e.target.hash+"]");$("html, body").animate({scrollTop:s.offset().top},500),s.tab("show"),$(".providers-table-slider").slick("refresh")}),h(),$("#zipCode").keypress(function(e){13==e.keyCode&&$("#cyh_process_zip").trigger("click")}),$("#cyh_process_zip").on("click",function(t){var e;if($("#cyh_process_status").text("").addClass("loading"),!(e=$("#zipCode").val(),/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(e)))return $("#cyh_process_status").addClass("error-message").removeClass("loading").text("Please enter accurate zip code"),void setTimeout(function(){$("#cyh_process_status").removeClass("error-message").text(""),$("#zipCode").val($("#currentZipCode").val())},3e3);var s={action:"cyh_find_city",zip_code:$("#zipCode").val()};$.post(ajax_object.ajax_url,s,function(e){var s=$.parseJSON(e);"success"==s.result?(window.location.href=s.link,$("#cyh_process_status").removeClass("error-message")):($("#cyh_process_status").addClass("error-message").removeClass("loading").text("Please enter accurate zip code"),setTimeout(function(){$("#cyh_process_status").removeClass("error-message").text(""),$("#zipCode").val($("#currentZipCode").val())},3e3),t.preventDefault())}),t.preventDefault()}),$("#brandsList").on("change",function(e){var s=$(this).parent().parent().parent().find(".loader"),t=$("#brandsList").val(),i=$("#currentZipCode").val(),a=($("#brandsList option:selected").attr("data-hideTab"),["internetOffers","internetTvOffers"]),o=$("#allBrandsTab"),r=$("#oneBrandTab"),n=$(this).closest(".offers-navigation"),l=n.find("li a"),d=$(this).closest(".offers-navigation").find("li.active > a").attr("href").replace(/[#\d]/g,"");if(s.addClass("loading"),n.find("li a.disabled").removeClass("disabled"),"all"==t)v(l,a),u(o,d,a),o.show(),r.hide(),s.removeClass("loading"),p(),f(),h();else{var c={action:"cyh_show_brand_data",brand_id:t,zip:i};$.post(ajax_object.ajax_url,c,function(e){0<e.length&&(v(l,a,2),o.hide(),r.html(e).promise().done(function(){u($(this),d,a,2)}),s.removeClass("loading"),r.show(),p(),f(),h())})}e.preventDefault()}),$(document).on("click","a[data-brand-id]",function(e){e.preventDefault();var s=$(this).attr("data-brand-id"),t=$("#all-available-offers"),i=$("#brandsList"),a=$(t).offset();$("html, body").stop().animate({scrollTop:a.top},500),i.val()!==s&&i.val(s).change()})});