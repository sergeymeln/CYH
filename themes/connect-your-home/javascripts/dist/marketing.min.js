"use strict";$(document).on("ready",function(){var e=$(".providers-slider li").length,s=e,t=$(window).width();function a(e){$(e).each(function(e){var o=$(this).next(".provider-count").find(".current-slide"),l=$(this).next(".provider-count").find(".slide-count");$(this).on("init reInit afterChange",function(e,s,t,a){var i=(t||0)+1;o.text(i),l.text(s.slideCount)})})}function h(){$(".providers-table-slider").slick({dots:!1,slidesToShow:1,slidesToScroll:1,customPaging:a(".providers-table-slider")})}function f(){$(".providers-table-slider.slick-initialized").slick("unslick")}function p(){$('a[data-target="#legalInfo"]').on("click",function(e){e.preventDefault(),e.stopPropagation();var s=$(this).next(".terms-content").text();$("#legalInfo .modal-body .text-left").text(s),$("#legalInfo").modal("show")})}function v(e,t,a){a=a||"",$.each(e,function(e,s){$(s).attr("href","#"+t[e]+a)})}function u(a,i,o,l){l=l||"";var n=a.find("div#"+i+l);n.find("table");$.each(o,function(e,s){if(1===a.find("div#"+s+l).find("table").length){var t=$("a[href=#"+s+l+"]");t.parent().removeClass("active"),t.addClass("disabled"),i!=o[0]&&(i=o[0],$("a[href=#"+i+l+"]").parent().addClass("active"))}n=a.find("div#"+i+l)}),n.addClass("in active")}5<e&&(s=5),$(".providers-slider").slick({dots:!1,accessibility:!0,centerMode:!0,centerPadding:"0px",arrows:!0,slidesToShow:s,mobileFirst:!0,slidesToScroll:1,customPaging:a(".providers-slider"),responsive:[{breakpoint:1020,settings:{slidesToShow:s,slidesToScroll:1}},{breakpoint:991,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:318,settings:{slidesToShow:1,slidesToScroll:1}}]}),$(window).load(function(){var i="read more";if(t<768&&location.hash){var e=location.hash.slice(1);$(".terms-table-slider").slick({dots:!1,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0});var s=$("."+e).closest(".slick-slide").attr("data-slick-index");$(".terms-table-slider").slick("slickGoTo",parseInt(s))}t<768&&$(".information-section .content").each(function(){var e=$(this).html(),s=$(this).find("p")[0],t=$(s).html().length;if(e.length>t){var a="<p>"+$(s).html()+'</p><span class="morecontent"><span>'+e+'</span><a href="#" class="morelink">'+i+"</a></span>";$(this).html(a)}}),$(".morelink").click(function(){return $(this).hasClass("less")?($(this).removeClass("less"),$(this).html(i)):($(this).addClass("less"),$(this).html("show less")),$(this).parent().prev().toggle(),$(this).prev().toggle(),!1})}),h(),$(document).on("click",".providers-table .slide-cell",function(){var e=$(this).parent().next(".hidden-row ");e.hasClass("open")?($(this).removeClass("open"),e.removeClass("open")):($(this).addClass("open"),e.addClass("open")),e.find("td .hidden-content").slideToggle()}),$(".tab-offers a").click(function(e){e.preventDefault(),$(this).tab("show"),$(".providers-table-slider").slick("refresh")}),$(".map-section a").on("click",function(e){var s=$(".tab-offers a[href="+e.target.hash+"]");$("html, body").animate({scrollTop:s.offset().top},500),s.tab("show"),$(".providers-table-slider").slick("refresh")}),p(),$("#zipCode").keypress(function(e){13==e.keyCode&&$("#cyh_process_zip").trigger("click")}),$("#cyh_process_zip").on("click",function(t){var e;if($("#cyh_process_status").text("").addClass("loading"),!(e=$("#zipCode").val(),/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(e)))return $("#cyh_process_status").addClass("error-message").removeClass("loading").text("Please enter accurate zip code"),void setTimeout(function(){$("#cyh_process_status").removeClass("error-message").text(""),$("#zipCode").val($("#currentZipCode").val())},3e3);var s={action:"cyh_find_city",zip_code:$("#zipCode").val()};$.post(ajax_object.ajax_url,s,function(e){var s=$.parseJSON(e);"success"==s.result?(window.location.href=s.link,$("#cyh_process_status").removeClass("error-message")):($("#cyh_process_status").addClass("error-message").removeClass("loading").text("Please enter accurate zip code"),setTimeout(function(){$("#cyh_process_status").removeClass("error-message").text(""),$("#zipCode").val($("#currentZipCode").val())},3e3),t.preventDefault())}),t.preventDefault()}),$("#brandsList").on("change",function(e){var s=$(this).parent().parent().parent().find(".loader"),t=$("#brandsList").val(),a=$("#currentZipCode").val(),i=($("#brandsList option:selected").attr("data-hideTab"),["internetOffers","internetTvOffers"]),o=$("#allBrandsTab"),l=$("#oneBrandTab"),n=$(this).closest(".offers-navigation"),r=n.find("li a"),d=$(this).closest(".offers-navigation").find("li.active > a").attr("href").replace(/[#\d]/g,"");if(s.addClass("loading"),n.find("li a.disabled").removeClass("disabled"),"all"==t)v(r,i),u(o,d,i),o.show(),l.hide(),s.removeClass("loading"),f(),h(),p();else{var c={action:"cyh_show_brand_data",brand_id:t,zip:a};$.post(ajax_object.ajax_url,c,function(e){0<e.length&&(v(r,i,2),o.hide(),l.html(e).promise().done(function(){u($(this),d,i,2)}),s.removeClass("loading"),l.show(),f(),h(),p())})}e.preventDefault()}),$("a.see-all-offers").on("click",function(e){e.preventDefault();var s=$("#brandsList");if("all"!==s.val()){s.val("all").change();var t=$("#all-available-offers"),a=$(t).offset();$("html, body").stop().animate({scrollTop:a.top},500)}}),$(document).on("click","a[data-brand-id]",function(e){e.preventDefault();var s=$(this).attr("data-brand-id"),t=$("#all-available-offers"),a=$("#brandsList"),i=$(t).offset();$("html, body").stop().animate({scrollTop:i.top},500),a.val()!==s&&a.val(s).change()})});