"use strict";var InternetCities=InternetCities||{};(function(){var t=this;function e(){var o=this;function t(){var e=$("#all-available-offers"),t=$(e).offset();$("html, body").stop().animate({scrollTop:t.top},500)}o.InternetCategories=[4,5],o.InternetTvCategories=[7],o.Loading=ko.observable(!0),o.BestOffersLoading=ko.observable(!1),o.AllProductsLoading=ko.observable(!1),o.SelectedProvider=ko.observable(),o.BestOffersTabSelected=ko.observable(1),o.AllProductsTabSelected=ko.observable(1),o.HeaderProviderOrderNumber=ko.observable(1),o.TopProvidersOrderNumber=ko.observable(1),o.BestOffersOrderNumber=ko.observable(1),o.AllProductsOrderNumber=ko.observable(1),o.MobileTableOptions={dots:!1,slidesToShow:1,slidesToScroll:1},o.SelectedBestOffersCategories=ko.pureComputed(function(){switch(o.BestOffersTabSelected()){case 1:return o.InternetCategories;case 2:return o.InternetTvCategories}}),o.SelectedAllProductsCategories=ko.pureComputed(function(){switch(o.AllProductsTabSelected()){case 1:return o.InternetCategories;case 2:return o.InternetTvCategories}}),o.UpdateBestOfferTab=function(e,t,r){o.BestOffersLoading(!0),$("#best-offers-slick").slick("unslick"),o.BestOffersTabSelected(r),o.BestOffersOrderNumber(1)},o.UpdateAllProductsTab=function(e,t,r){o.AllProductsLoading(!0),$("#all-products-slick").slick("unslick"),o.AllProductsTabSelected(r),o.AllProductsOrderNumber(1)},o.Initialize=function(e){ko.mapping.fromJS(e,{},o),o.ProviderCount=ko.pureComputed(function(){return o.Providers().length}),o.TopProviderCount=ko.pureComputed(function(){return o.TopProviders().length<5?o.TopProviders().length:5}),o.HasSpectrum=ko.pureComputed(function(){return 0<o.Providers().filter(function(e){return/Spectrum/.test(e.Name())}).length}),o.QuickFactsBegin=ko.pureComputed(function(){return o.City.Bullets().slice(0,o.City.Bullets().length/2)}),o.QuickFactsEnd=ko.pureComputed(function(){return o.City.Bullets().slice(o.City.Bullets().length/2)}),o.BestOffersInternet=ko.pureComputed(function(){return o.ProductListSorted().filter(function(e){return e.IsBestOffer()&&-1!==$.inArray(e.ServiceProviderCategory.Category.Id(),o.SelectedBestOffersCategories())})}).extend({rateLimit:500}),o.BestOffersInternetCount=ko.pureComputed(function(){return o.BestOffersInternet().length}),o.AllProductsInternet=ko.pureComputed(function(){return o.ProductListSortedAll().filter(function(e){return void 0!==o.SelectedProvider()?e.ServiceProviderCategory.Provider.Id()==o.SelectedProvider()&&-1!==$.inArray(e.ServiceProviderCategory.Category.Id(),o.SelectedAllProductsCategories()):-1!==$.inArray(e.ServiceProviderCategory.Category.Id(),o.SelectedAllProductsCategories())})}).extend({rateLimit:500}),o.AllProductsInternetCount=ko.pureComputed(function(){return o.AllProductsInternet().length}),o.ProviderSliderOptions=ko.pureComputed(function(){var e=5<o.ProviderCount()?5:o.ProviderCount();return{dots:!1,accessibility:!0,centerMode:!0,centerPadding:"0px",arrows:!0,slidesToShow:e,mobileFirst:!0,slidesToScroll:1,responsive:[{breakpoint:1020,settings:{slidesToShow:e,slidesToScroll:1}},{breakpoint:991,settings:{slidesToShow:e<3?e:3,slidesToScroll:1}},{breakpoint:600,settings:{slidesToShow:e<3?e:3,slidesToScroll:1}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:318,settings:{slidesToShow:1,slidesToScroll:1}}]}})},o.FormatPrice=function(e){return e?"$"+e.toString():"-"},o.SeeAllProviderPackages=function(e){o.SelectedProvider(e.provider.Id()),o.AllProductsTabSelected(1),t()},o.SeeAllInternetOffers=function(){o.SelectedProvider(void 0),o.AllProductsOrderNumber(1),t()},o.FormatPhone=function(e){return e.toString().slice(0,3)+"-"+e.toString().slice(3,6)+"-"+e.toString().slice(6,10)},o.SelectedProvider.subscribe(function(){o.AllProductsLoading(!0),$("#all-products-slick").slick("unslick"),o.AllProductsOrderNumber(1)},null,"beforeChange")}t.vm=null,t.Initialize=function(e){t.vm=t.GetVm(),t.vm.Initialize(e),ko.applyBindings(t.vm,document.getElementById("internetCityPage")),t.vm.Loading(!1)},t.GetVm=function(){return new e}}).apply(InternetCities),$(document).on("ready",function(){$(window).load(function(){var e=$(window).width(),s="read more";if(e<768&&location.hash){var t=location.hash.slice(1);$(".terms-table-slider").slick({dots:!1,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0});var r=$("."+t).closest(".slick-slide").attr("data-slick-index");$(".terms-table-slider").slick("slickGoTo",parseInt(r))}e<768&&$(".information-section .content").each(function(){var e=$(this).html(),t=$(this).find("p")[0],r=$(t).html().length;if(e.length>r){var o="<p>"+$(t).html()+'</p><span class="morecontent"><span>'+e+'</span><a href="#" class="morelink">'+s+"</a></span>";$(this).html(o)}}),$(".morelink").click(function(){return $(this).hasClass("less")?($(this).removeClass("less"),$(this).html(s)):($(this).addClass("less"),$(this).html("show less")),$(this).parent().prev().toggle(),$(this).prev().toggle(),!1})}),$(document).on("click",".providers-table .slide-cell",function(){var e=$(this).parent().next(".hidden-row ");e.hasClass("open")?($(this).removeClass("open"),e.removeClass("open")):($(this).addClass("open"),e.addClass("open")),e.find("td .hidden-content").slideToggle()}),$("#zipCode").keypress(function(e){13==e.keyCode&&$("#cyh_process_zip").trigger("click")}),$("#cyh_process_zip").on("click",function(r){var e;if($("#cyh_process_status").text("").addClass("loading"),!(e=$("#zipCode").val(),/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(e)))return $("#cyh_process_status").addClass("error-message").removeClass("loading").text("Please enter accurate zip code"),void setTimeout(function(){$("#cyh_process_status").removeClass("error-message").text(""),$("#zipCode").val($("#currentZipCode").val())},3e3);var t={action:"cyh_find_city",zip_code:$("#zipCode").val()};$.post(ajax_object.ajax_url,t,function(e){var t=$.parseJSON(e);"success"==t.result?(window.location.href=t.link,$("#cyh_process_status").removeClass("error-message")):($("#cyh_process_status").addClass("error-message").removeClass("loading").text("Please enter accurate zip code"),setTimeout(function(){$("#cyh_process_status").removeClass("error-message").text(""),$("#zipCode").val($("#currentZipCode").val())},3e3),r.preventDefault())}),r.preventDefault()})});